
<!DOCTYPE html>
<title>HelloWorld</title>

<head>    
  
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

</head>

<body>
	<h1>Hello World!</h1>
 	<div id="smplr-container"></div>

<script>

const HelloWorld = () => {
  useSmplrJs({ onLoad, dev: false })

  function onLoad () {
    const space = new smplr.Space({
      spaceId: 'a3a34437-b393-4666-8911-aaaad38926d0', // prod
      // spaceId: '96eae952-ef60-4058-aba1-6ace322506e7', // dev
      spaceToken: 'X',
      containerId: 'smplr-container'
    })
    space.startViewer({
      preview: true,
      mode: '3d',
      allowModeChange: true,
      onReady: () => console.log('Viewer is ready'),
      onError: error => console.error('Could not start viewer', error)
    })
  }

  
  return (
    <div style={{ width: '100%', maxWidth: 800, margin: '0 auto' }}>
      <div
        style={{
          position: 'relative',
          paddingBottom: '60%'
        }}
      >
        <div
          id='smplr-container'
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            backgroundColor: 'whitesmoke'
          }}
        />
      </div>
    </div>
  )
}

import { useEffect, useRef } from 'react'

import useScript from './useScript'
import useStylesheet from './useStylesheet'

export default function useSmplrJs ({ onLoad, dev = false }) {
  const loaded = useRef(false)

  const smplrjsStatus = useScript(
    `https://${dev ? 'dev' : 'app'}.smplrspace.com/lib/smplr.js`
  )
  useStylesheet(`https://${dev ? 'dev' : 'app'}.smplrspace.com/lib/smplr.css`)

  useEffect(() => {
    if (smplrjsStatus === 'ready' && !loaded.current) {
      loaded.current = true
      onLoad && onLoad()
    }
  }, [onLoad, smplrjsStatus])
}


export default HelloWorld
</script>
 
</body>